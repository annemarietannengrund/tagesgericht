# Tagesgericht

A "Tagesgericht" in german is simply a featured "meal of the day", thats where this project idea came from.

## User Story

One day one of the waitresses complained around lunchtime that she had already answered about 30 phonecalls.

each caller had asked for the same information, what the meal of the day was.

So i thought, maybe the amount of calls would decrease if the information about the meal of the day would be accessible
on the internet.

this application is intended for usage by non-tech savvy persons, every interaction is intended to create no further
interaction with the program. therefore, its also ready to be called by cronjobs \o/

### Use case

When a new plan for the week has been created, the user simply starts this application and builds a report. the report
generator will automatically create subfolders in the data directory for this and next calendarweek.

within the generated calendarweek folders it will create text files for each entry in the configuration 'active_days'.
active days just defines the dates the restaurant offers a meal of the day, or desires to tweet out messages.

The tweet functionality is called from the restaurant, by whoever is on duty that day. when shift starts or restaurant
opens one can click send_tagesgericht_tweet.bat and when its sold out they can click the stop_tagesgericht_tweet.bat.

### What to do after setup is done?

Simply start the programm, on windows click print/create a report, on linux/mac call the main.py

## Application description

The application runs on Python 3.7+, and currently offers five methods for its purpose.

- create a short report
    - prints out a short report on the terminal/cmd
- create a html report
    - creates a html formatted report, with more information than the print report
- send a tweet
    - sends a tweet for today, if a message has been created that meets validation standards
- stop a tweet
    - sends a tweet, if meal of the day has been promoted, that the meal has been sold out

## Application configuration

Information about how to configure the application.
configuration is initialized in `main.py`.

```
config = {
    "credentials": load_credentials(),
    "specialdays": load_specialdays(),
    'translate': load_language(code='de'),
    "data_dir": "Data/",
    "active_days": [0, 1, 2, 3, 4],
}
```

here you may want to adapt the path to data_dir and the numbers in active_days.

see "Day template creation" for more information on how to setup active_days!

### Translation

As you can currently see, there is a little translation feature implemented. if no translation is provided at all, the
fallback language is english.

### Twitter credentials

The application itself doesnt require twitter credentials at all, only if you want to use the tweet functionality. the
application is merely a organizer for messages, that you can plan ahead of time.

Twitter credentials will be read from credentials.json.

### Day template creation

The Templates for each day of a week are generated by the configuration 'active_days'.

active days represents a list of numerical values representing a day in a week

i.e.:
0 for monday, 1 for tuesday, 2 for wednesday, 3 for thursday and 4 for friday.

the default configuration assumes the restaurant offers a meal of the day from monday to friday.

if you want a template to be created for sunday and saturday as well, just add the numbers 5 and 6.

### Data directory

the data directory is where the files for year/calenderweek with the files will be created.

the default value if not changed is "Data".

### Changing language

there are 2 actors playing here, one is Tagesgericht, whose language config is done in main.py.

the other actor is Sphinx, the generator for the html report, Sphinx may offer translations in your language.

just follow ISO 3166 ALPHA-2 and replace the following content with your desired language.

```
# Sphinx-docs/conf.py
language = "de"
```

### Reminder function

in the `specialdays.json` you can define a day and a month number, that is mapped to a message. this message will be
displayed on the day in the html report. this feature allows to be reminded for special day from2 up to 3 weeks ahead

# Installation & Setup

install [python 3.7+](https://www.python.org/downloads/), make sure to check "add python 3.XX to Path".

also allow max pathlengths to be exceeded, at the end of the installer

then start the following bat file

setup.bat - prepare the virtual environment for this software

# run on windows

use the batchfiles.

create_html_report.bat - creates a html report and opens it in the browser

create_sphinx_report.bat - creates html report (internally used, nnot intended for you)

send_tagesgericht_tweet.bat - sends the prepared message for the day

stop_tagesgericht_tweet.bat - sends a sold-out message

check_code_coverage - creates a html code coverage ceport

# run on linux/mac

```
coverage run -m unittest discover -s ./tests && coverage html
coverage run -m unittest discover ./tests --ignore=Sphinx-docs && coverage html
```

or

```
chmod +x *.sh
./tagesgericht.sh
```

or

```
python main.py print_report
python main.py create_report
python main.py send_tweet
python main.py stoptweet
```